// Goal: Perform one iteration of critial sequence:
//  1. Detect an obstacle.
//  2. Generate a stop trajectory.
//
// Purpose:
//  1. Demonstrate knowledge of C++
//  2. Demonstrate program design ability with C++
//
// Requirements:
//  1. Messages are Type Safe
//  2. Components are Decoupled
//  -- ie. components only understand message types, not component types.
//
// Simplifying Assumptions:
//  - Single threaded.
//  - All types are known at compile time.
//
// Example code may be modified in any way that meets the goal, purpose, or requirements.

#include <iostream>
using namespace std;

bool nogo = false;

struct Obstacle {
  std::string type;
};

struct Trajectory {
  std::string action;
};

// ...

struct Perception {
  void tick() {
    Obstacle obstacle;  // Output.
    obstacle.type = "Pedestrian";

    // ??
  }
};

struct Planning {
  void tick() {
    Obstacle obstacle;      // Input.
    Trajectory trajectory;  // Output.

    // ??

    if (obstacle.type == "Pedestrian") {
      trajectory.action = "Stop";
    }

    // ??
  }
};

struct Control {
  void tick() {
    Trajectory trajectory;  // Input.

    // ??

    if (trajectory.action == "Stop") {
      nogo = true;
    }
  }
};

// ...

int main(int argc, char** argv) {
  Perception perception;
  Planning planning;
  Control control;

  // ??

  while (!nogo) {
    perception.tick();
    planning.tick();
    control.tick();
  }

  return 0;
}
